<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>民間自救指南 | 阅读器</title>
	<meta name="description" content="◎当法律保护不了你的时候，你只能自己保护自己。">
	<meta name="author" content="◎保命专用。">
	<meta property="og:title" content="◎活下去，比什么都重要。">
<meta property="og:image" content="data:image/jpeg;base64,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">
	<meta property="og:description" content="◎少去凑热闹，少去人堆里挤。">
	<meta property="og:site_name" content="微信公众平台">
	<meta property="og:type" content="article">
	<meta property="og:article:author" content="◎这本书，但愿你永远用不上。">
	<meta property="twitter:card" content="summary">
	<meta property="twitter:image" content="data:image/jpeg;base64,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">
	<meta property="twitter:title" content="◎当未来看不清的时候，你只能自己走稳每一步。">
	<meta property="twitter:creator" content="◎民間自救指南">
	<meta property="twitter:site" content="微信公众平台">
	<meta property="twitter:description" content="◎普通人在无差别暴力事件中的自保方式。">
 
  <!-- 引入 PDF.js 核心库（CDN） -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <!-- 设置 PDF.js worker 路径 -->
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
  </script>

  <!-- 可选：EPUB.js（此处仅预留，未激活） -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/epubjs@0.3.93/dist/epub.min.js"></script> -->

  <!-- 引入手势库 Hammer.js -->
  <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>

  <style>
    /* 全局重置 */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #f5f5f5;
      font-family: sans-serif;
      overflow: hidden; /* 防止滚动条干扰手势 */
      touch-action: none; /* 允许 Hammer.js 控制触摸 */
    }

    /* 主容器：全屏显示 */
    #reader-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      perspective: 1000px;
    }

    /* 内容区域：根据设备方向切换布局 */
    #content-area {
      width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
    }

    /* 页面容器：用于翻页动画 */
    .page {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: white;
      backface-visibility: hidden;
      transform-style: preserve-3d;
      transition: transform 0.3s cubic-bezier(0.33, 1, 0.68, 1); /* 流畅动画 */
      will-change: transform; /* 提升渲染性能 */
    }

    /* 图片/PDF 内容样式 */
    .page-content {
      max-width: 95%;
      max-height: 95%;
      object-fit: contain;
      user-select: none;
      -webkit-user-drag: none;
    }

    /* 翻页按钮（PC 显示） */
    .nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      width: 50px;
      height: 100px;
      font-size: 24px;
      cursor: pointer;
      z-index: 100;
      opacity: 0.7;
      transition: opacity 0.2s;
    }
    .nav-btn:hover {
      opacity: 1;
    }
    #prev-btn { left: 10px; }
    #next-btn { right: 10px; }

    /* 手机模式隐藏左右按钮，改用上下按钮（可选） */
    @media (max-width: 768px) {
      .nav-btn {
        display: none;
      }
      /* 可添加上下按钮（此处省略，依赖手势） */
    }

    /* 书签和缩放控件 */
    #controls {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 200;
    }
    .control-btn {
      background: rgba(0,0,0,0.6);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
    }

    /* 加载提示 */
    #loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      z-index: 1000;
    }
  </style>
</head>
<body>

<!-- 加载提示 -->
<div id="loading">正在加载书籍...</div>

<!-- 主阅读区域 -->
<div id="reader-container">
  <div id="content-area"></div>
</div>

<!-- 控制按钮 -->
<div id="controls">
  <button class="control-btn" id="zoom-in">+</button>
  <button class="control-btn" id="zoom-out">−</button>
  <button class="control-btn" id="bookmark">★</button>
</div>

<!-- 翻页按钮（PC） -->
<button class="nav-btn" id="prev-btn">‹</button>
<button class="nav-btn" id="next-btn">›</button>

<script>
  // ======================
  // 配置区（可替换为动态传参）
  // ======================
  const config = {
    // 支持三种格式之一：
    // 1. 单图: 'https://example.com/book.jpg'
    // 2. 多图: ['img1.jpg', 'img2.jpg', ...]
    // 3. PDF: 'book.pdf'
    source: ['book-00.jpg', 'book-01.jpg', 'book-02.jpg', 'book-03.jpg', 'book-04.jpg', 'book-05.jpg', 'book-06.jpg', 'book-07.jpg', 'book-08.jpg'],
    // source: 'https://example.com/sample.pdf', // 示例 PDF
    // source: 'https://example.com/cover.jpg',   // 示例单图

    // 缩放设置
    minScale: 0.5,
    maxScale: 3,
    defaultScale: 1,
  };

  // ======================
  // 全局状态
  // ======================
  let currentPage = 0;
  let totalPages = 0;
  let pages = []; // 存储所有页面元素
  let scale = config.defaultScale;
  let isMobile = window.innerWidth <= 768;
  let bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '{}');

  // ======================
  // 初始化入口
  // ======================
  async function initReader() {
    const source = config.source;

    // 自动检测类型
    if (typeof source === 'string') {
      if (source.endsWith('.pdf')) {
        await loadPDF(source);
      } else {
        // 单张图片
        totalPages = 1;
        pages = [source];
        renderPages();
      }
    } else if (Array.isArray(source)) {
      // 多张图片
      totalPages = source.length;
      pages = [...source];
      renderPages();
    }

    setupControls();
    setupGestures();
    hideLoading();
  }

  // ======================
  // 加载 PDF
  // ======================
  async function loadPDF(url) {
    try {
      const loadingTask = pdfjsLib.getDocument(url);
      const pdf = await loadingTask.promise;
      totalPages = pdf.numPages;
      pages = [];

      // 预渲染所有页面为 canvas URL（简化版，实际可懒加载）
      for (let i = 1; i <= totalPages; i++) {
        const page = await pdf.getPage(i);
        const viewport = page.getViewport({ scale: 2 }); // 高清
        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        await page.render({ canvasContext: context, viewport }).promise;
        pages.push(canvas.toDataURL()); // 转为 base64 图片
      }
      renderPages();
    } catch (err) {
      alert('PDF 加载失败: ' + err.message);
      hideLoading();
    }
  }

  // ======================
  // 渲染页面 DOM
  // ======================
  function renderPages() {
    const contentArea = document.getElementById('content-area');
    contentArea.innerHTML = '';

    pages.forEach((src, index) => {
      const pageEl = document.createElement('div');
      pageEl.className = 'page';
      if (index !== currentPage) {
        pageEl.style.display = 'none'; // 初始只显示当前页
      }

      const img = document.createElement('img');
      img.src = src;
      img.className = 'page-content';
      img.draggable = false;
      pageEl.appendChild(img);
      contentArea.appendChild(pageEl);
    });

    updatePageTransform();
  }

  // ======================
  // 更新页面位置/缩放
  // ======================
  function updatePageTransform() {
    const pageEls = document.querySelectorAll('.page');
    pageEls.forEach((el, i) => {
      const img = el.querySelector('.page-content');
      if (!img) return;

      // 应用缩放
      img.style.transform = `scale(${scale})`;
      img.style.transformOrigin = 'center';

      // 移动端：上下堆叠；桌面端：左右排列
      if (isMobile) {
        el.style.transform = `translateY(${(i - currentPage) * 100}%)`;
      } else {
        el.style.transform = `translateX(${(i - currentPage) * 100}%)`;
      }

      // 显示当前页，隐藏其他（优化性能）
      el.style.display = i === currentPage ? 'flex' : 'none';
    });
  }

  // ======================
  // 翻页逻辑
  // ======================
  function goToPage(index) {
    if (index < 0 || index >= totalPages) return;
    currentPage = index;
    updatePageTransform();

    // 更新书签按钮状态
    const bookmarkBtn = document.getElementById('bookmark');
    bookmarkBtn.textContent = bookmarks[currentPage] ? '☆' : '★';
  }

  // ======================
  // 控件绑定
  // ======================
  function setupControls() {
    document.getElementById('prev-btn').onclick = () => goToPage(currentPage - 1);
    document.getElementById('next-btn').onclick = () => goToPage(currentPage + 1);

    document.getElementById('zoom-in').onclick = () => {
      scale = Math.min(config.maxScale, scale + 0.2);
      updatePageTransform();
    };
    document.getElementById('zoom-out').onclick = () => {
      scale = Math.max(config.minScale, scale - 0.2);
      updatePageTransform();
    };

    const bookmarkBtn = document.getElementById('bookmark');
    bookmarkBtn.onclick = () => {
      if (bookmarks[currentPage]) {
        delete bookmarks[currentPage];
        bookmarkBtn.textContent = '★';
      } else {
        bookmarks[currentPage] = new Date().toISOString();
        bookmarkBtn.textContent = '☆';
      }
      localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
    };

    // 初始书签状态
    bookmarkBtn.textContent = bookmarks[currentPage] ? '☆' : '★';
  }

  // ======================
  // 手势支持（Hammer.js）
  // ======================
  function setupGestures() {
    const area = document.getElementById('content-area');
    const mc = new Hammer(area);

    let startX, startY;

    mc.on('panstart', ev => {
      startX = ev.center.x;
      startY = ev.center.y;
    });

    mc.on('panend', ev => {
      const dx = ev.center.x - startX;
      const dy = ev.center.y - startY;
      const threshold = 50;

      if (isMobile) {
        if (dy < -threshold) goToPage(currentPage + 1); // 上滑下一页
        if (dy > threshold) goToPage(currentPage - 1);  // 下滑上一页
      } else {
        if (dx < -threshold) goToPage(currentPage + 1); // 左滑下一页
        if (dx > threshold) goToPage(currentPage - 1);  // 右滑上一页
      }
    });
  }

  // ======================
  // 工具函数
  // ======================
  function hideLoading() {
    document.getElementById('loading').style.display = 'none';
  }

  // ======================
  // 启动阅读器
  // ======================
  window.addEventListener('load', initReader);
  window.addEventListener('resize', () => {
    isMobile = window.innerWidth <= 768;
    updatePageTransform();
  });
</script>

</body>
</html>